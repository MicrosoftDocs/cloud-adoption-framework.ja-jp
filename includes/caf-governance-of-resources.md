<!-- TEMPLATE FILE - DO NOT ADD METADATA -->
<!-- markdownlint-disable MD002 MD041 -->
> [!NOTE]
>ビジネス要件が変化した場合は、Azure 管理グループにより、管理階層とサブスクリプション グループの割り当てを簡単に再編成できます。 ただし、管理グループに適用されるポリシーとロールの割り当ては、階層内のそのグループの下にあるすべてのサブスクリプションで継承されることに注意してください。 管理グループ間でサブスクリプションを再割り当てする場合は、ポリシーとロールの割り当てが変化する可能性があることを認識してください。 詳細については、[Azure 管理グループのドキュメント](https://docs.microsoft.com/azure/governance/management-groups)に関するページを参照してください。

### <a name="governance-of-resources"></a>リソースのガバナンス

一連のグローバル ポリシーと RBAC ロールにより、ガバナンスを実施するベースライン レベルが提供されます。 クラウド ガバナンス チームのポリシー要件を満たすには、ガバナンス MVP の実装で次のタスクを完了する必要があります。

1. ビジネス要件の適用に必要な Azure Policy 定義を識別します。 これには、組み込みの定義の使用と新しいカスタムの定義の作成を含めることができます。
2. これらの組み込みのカスタム ポリシーと、ガバナンス MVP で必要なロール割り当てを使用して、ブルー プリント定義を作成します。
3. このブルー プリント定義をすべてのサブスクリプションに割り当てて、ポリシーと構成をグローバルに適用します。

#### <a name="identify-policy-definitions"></a>ポリシー定義を識別する

Azure が提供するいくつかの組み込みのポリシーとロール定義は、どの管理グループ、サブスクリプション、またはリソース グループにも割り当てることができます。 多くの一般的なガバナンス要件は、組み込みの定義を使用して処理できます。 しかし、特定の要件を処理するために、カスタム ポリシーの定義を作成する必要もある可能性が高いです。

カスタム ポリシー定義は、管理グループまたはサブスクリプションのいずれかに保存され、管理グループ階層を通じて継承されます。 ポリシー定義の保存場所が管理グループの場合は、ポリシー定義をそのグループの子管理グループまたはサブスクリプションのいずれかに割り当てることができます。

ガバナンス MVP のサポートに必要なポリシーは、現在のすべてのサブスクリプションに適用されることになっているため、次のビジネス要件は、組み込みの定義とルート管理グループで作成されたカスタム定義を組み合わせて使用し、実装されます。

1. 使用可能なロール割り当てのリストを、クラウド ガバナンス チームが許可した一連の組み込み Azure ロールに制限します。 これには、[カスタム ポリシーの定義](https://github.com/Azure/azure-policy/tree/master/samples/Authorization/allowed-role-definitions)が必要です。
2. すべてのリソースで次のタグを必須にします。*Department/Billing Unit*、*Geography*、*Data Classification*、*Criticality*、*SLA*、*Environment*、*Application Archetype*、*Application*、および *Application Owner*。 これは、`Require specified tag` 組み込み定義を使用して処理することができます。
3. リソースの `Application` タグを、関連するリソース グループの名前と一致させる必要があります。 これは、"タグとその値が必要" の組み込みの定義を使用して処理することができます。

カスタム ポリシーの定義については、[Azure Policy のドキュメント](https://docs.microsoft.com/azure/governance/policy/tutorials/create-custom-policy-definition)をご覧ください。 カスタム ポリシーのガイダンスおよび例については、[Azure Policy のサンプル サイトに関するページ](https://docs.microsoft.com/azure/governance/policy/samples)、および関連する[GitHub リポジトリに関するページ](https://github.com/Azure/azure-policy)をご覧ください。

#### <a name="assign-azure-policy-and-rbac-roles-using-azure-blueprints"></a>Azure Blueprints を使用して Azure Policy および RBAC ロールを割り当てる

Azure ポリシーは、リソース グループ、サブスクリプション、管理グループのレベルに割り当てることができ、[Azure Blueprints](https://docs.microsoft.com/azure/governance/blueprints/overview) の定義に含めることができます。 このガバナンス MVP で定義されたポリシー要件は、現在のすべてのサブスクリプションに適用されますが、将来のデプロイでは、例外や代替のポリシーが高い確率で必要になります。 その結果、管理グループを使用してポリシーを割り当て、すべての子サブスクリプションがこれらの割り当てを継承した場合は、柔軟性が足りないために、これらのシナリオをサポートできない可能性があります。

Azure Blueprints を使用すると、複数のサブスクリプション全体で、ポリシーとロールを一貫した方法で割り当て、Resource Manager テンプレートを適用し、リソース グループをデプロイできます。 ポリシー定義と同様に、ブループリント定義は管理グループまたはサブスクリプションに保存されます。 ポリシー定義は、管理グループ階層内の任意の子が、継承を通じて利用できます。

クラウド ガバナンス チームは、サブスクリプション全体に対する必要な Azure Policy と RBAC の割り当てを Azure Blueprints および関連するアーティファクトを通じて実装することを決定しました。

1. ルート管理グループ内で、`governance-baseline` という名前のブループリント定義を作成します。
2. ブループリント定義に次のブループリント アーティファクトを追加します。
    1. 管理グループ ルートで定義されたカスタム Azure Policy 定義のポリシー割り当て。
    2. ガバナンス MVP で作成または管理されるサブスクリプション内で必要なすべてのグループのリソース グループ定義。
    3. ガバナンス MVP で作成または管理されるサブスクリプション内で必要な標準ロール割り当て。
3. ブループリント定義を公開します。
4. `governance-baseline` ブループリント定義をすべてのサブスクリプションに割り当てます。

ブループリント定義の作成および使用の詳細については、[Azure Blueprints ドキュメント](https://docs.microsoft.com/azure/governance/blueprints/overview)をご覧ください。

### <a name="secure-hybrid-vnet"></a>ハイブリッド VNet をセキュリティで保護する

特定のサブスクリプションでオンプレミス リソースに対する一定レベルのアクセス権が必要になることがよくあります。 この状況が多く見られるのは、依存型リソースがオンプレミス データセンター内に存在する移行シナリオや開発シナリオです。

クラウド環境内で信頼が十分に確立されるまでは、オンプレミス環境とクラウド ワークロード間の許可された通信を厳重に制御および監視すること、およびクラウドベース リソースからの不正アクセスに対してオンプレミス ネットワークをセキュリティ保護することが重要です。 これらのシナリオをサポートするため、ガバナンス MVP では、次のベスト プラクティスが追加されています。

1. クラウドのセキュリティで保護されたハイブリッド VNet を確立します。
    1. [VPN 参照アーキテクチャ](https://docs.microsoft.com/azure/architecture/reference-architectures/hybrid-networking/vpn)で、Azure 内に VPN Gateway を作成するためのパターンとデプロイ モデルを確立します。
    2. オンプレミスのセキュリティとトラフィック管理メカニズムで、接続されているクラウド ネットワークが信頼できないものとして扱われることを検証します。 クラウドでホストされるリソースとサービスでは、許可されたオンプレミス サービスにのみアクセスできる必要があります。
    3. オンプレミス データセンター内のローカル エッジ デバイスが [Azure VPN Gateway の要件](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpn-devices)と互換性があり、パブリック インターネットにアクセスするように構成されていることを確認します。
    4. 最も単純なワークロードの場合を除き、VPN トンネルは運用に対応する回線と見なすべきではないことに注意してください。 オンプレミス接続を必要とする少数の単純なワークロードを超える場合は、Azure ExpressRoute を使用してください。
1. ルート管理グループ内で、`secure-hybrid-vnet` という名前のブループリント定義をもう 1 つ作成します。
    1. VPN Gateway の Resource Manager テンプレートをブループリント定義にアーティファクトとして追加します。
    2. 仮想ネットワークの Resource Manager テンプレートをブループリント定義にアーティファクトとして追加します。
    3. ブループリント定義を公開します。
1. オンプレミス接続が必要なすべてのサブスクリプションに `secure-hybrid-vnet` ブループリント定義を割り当てます。 この定義は、`governance-baseline` ブルー プリント定義に加えて割り当てる必要があります。

IT セキュリティ チームと従来のガバナンス チームから提起される最大の懸念の 1 つは、初期段階のクラウド導入が既存の資産を危険にさらすリスクです。 クラウド導入チームは上記のアプローチを利用することで、オンプレミスの資産に対するリスクを軽減しながら、ハイブリッド ソリューションを構築および移行できます。 クラウド環境での信頼が向上しているため、今後の発展に伴い、この一時的なソリューションは削除される可能性があります。

> [!NOTE]
> 上記の内容は、ベースラインのガバナンス MVP を迅速に作成するための出発点です。 これはガバナンス体験の始まりに過ぎません。 会社がクラウドの導入を継続し、以下の領域でより多くのリスクを負うようになると、さらなる進化が必要になります。
>
> - ミッションクリティカルなワークロード
> - 保護されたデータ
> - コスト管理
> - マルチクラウド シナリオ
>
> さらに、この MVP の具体的な詳細は、架空の会社の体験例に基づいて、以降の記事で説明されます。 このベスト プラクティスを実装する前に、このシリーズの他の記事を理解しておくことを強くお勧めします。
