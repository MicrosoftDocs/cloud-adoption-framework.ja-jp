---
title: ハブ アンド スポーク ネットワーク トポロジ
description: 一般的な通信またはセキュリティ要件をより効率的に管理するためのハブ アンド スポーク ネットワーク トポロジについて説明します。
author: tracsman
ms.author: jonor
ms.date: 05/10/2019
ms.topic: conceptual
ms.service: cloud-adoption-framework
ms.subservice: ready
manager: rossort
ms.custom: virtual-network
ms.openlocfilehash: 9aa123f458258a8fbb666345006661332701f12d
ms.sourcegitcommit: 014fe718162573f02d41bdc151a7302f02ca777b
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/21/2020
ms.locfileid: "90832894"
---
# <a name="hub-and-spoke-network-topology"></a>ハブ アンド スポーク ネットワーク トポロジ

"_ハブ アンド スポーク_" は、一般的な通信またはセキュリティ要件を効率的に管理するためのネットワーク モデルです。 Azure サブスクリプションの制限の回避にも役立ちます。 このモデルでは、次の懸念事項に対処します。

- **コストの削減と管理の効率。** 複数のワークロードで共有できるサービス (ネットワーク仮想アプライアンス (NVA) や DNS サーバーなど) を 1 か所に集めることで、IT は過剰なリソースと管理作業を最小限にすることができます。
- **サブスクリプションの制限の克服。** 大規模なクラウドベースのワークロードでは、単一の Azure サブスクリプション内で許可されるリソースよりも多くのリソースの使用が求められる場合があります。 さまざまなサブスクリプションから中央のハブへのワークロード仮想ネットワークのピアリングで、こうした制限を克服できます。 詳細については、[Azure サブスクリプションの制限](/azure/azure-resource-manager/management/azure-subscription-service-limits)に関するページを参照してください。
- **懸念事項の分離。** 中央の IT チームとワークロード チームの間で個々のワークロードをデプロイすることができます。

小さなクラウド資産は、このモデルによって追加で提供される構造と機能の恩恵を受けない場合があります。 しかし、大規模なクラウド導入作業で、上記のいずれかの懸念事項が 1 つでもあれば、ハブおよびスポーク ネットワーク アーキテクチャの実装を検討してください。

> [!NOTE]
> Azure 参照アーキテクチャ サイトには、独自のハブおよびスポーク ネットワークを実装するための基礎として使用できるサンプル テンプレートが含まれています。
>
> - [ハブ アンド スポーク ネットワーク トポロジを Azure 上に実装する](/azure/architecture/reference-architectures/hybrid-networking/hub-spoke)
> - [共有サービスを含むハブ アンド スポーク ネットワーク トポロジを Azure 上に実装する](/azure/architecture/reference-architectures/hybrid-networking/shared-services)

## <a name="overview"></a>概要

![ハブ アンド スポーク ネットワーク トポロジの例](../../_images/azure-best-practices/network-hub-spoke-high-level.png)  
"_図 1:ハブ アンド スポーク ネットワーク トポロジの例。_

図に示したように、Azure では 2 種類のハブおよびスポーク設計がサポートされます。 通信、共有リソース、一元的セキュリティ ポリシーをサポートするか (図では `VNet hub` というラベルが付いています)、ブランチとブランチの間またはブランチと Azure の間の大規模な通信用に Azure Virtual WAN に基づく設計をサポートします (図では `Virtual WAN` というラベルが付いています)。

ハブは、ゾーン (インターネット、オンプレミス、スポーク) 間のイングレスまたはエグレス トラフィックを制御および検査する中央ネットワーク ゾーンです。 ハブ アンド スポークのトポロジでは、IT 部門は一元化された場所でセキュリティ ポリシーを効率的に適用できます。 また、構成の誤りや露出の可能性も低減されます。

多くの場合、ハブには、スポークによって消費される共通のサービス コンポーネントが含まれます。 共通の中央サービスの例を次に示します。

- 信頼されていないネットワークからアクセスするサード パーティがスポーク内のワークロードにアクセスする前のユーザー認証に必要な Windows Server Active Directory インフラストラクチャ。 これには、関連する Active Directory フェデレーション サービス (AD FS) が含まれます。
- オンプレミスおよびインターネット上のリソースにアクセスするための、スポーク内のワークロードの名前付けを解決する DNS サービス ([Azure DNS](/azure/dns/dns-overview) が使用されていない場合)。
- ワークロードにシングル サインオンを実装するための公開キー基盤 (PKI)。
- スポーク ネットワーク ゾーンとインターネット間の TCP/UDP トラフィックのフロー制御。
- スポークとオンプレミス間のフロー制御。
- (必要に応じて) スポーク間のフロー制御。

共有ハブ インフラストラクチャを使用して複数のスポークをサポートすることで、冗長性を最小限に抑え、管理を合理化し、全体的なコストを削減できます。

各スポークのロールは、異なる種類のワークロードをホストできます。 スポークは、同じワークロードの反復可能なデプロイのためのモジュール方式のアプローチも提供します。 例として、開発またはテスト、ユーザー受け入れテスト、ステージング、運用があります。

スポークでは、組織内のさまざまなグループを分離して有効にすることもできます。 例として Azure DevOps グループがあります。 スポーク内には、基本的なワークロードや、階層間のトラフィック制御を伴う複雑な多層ワークロードをデプロイできます。

## <a name="subscription-limits-and-multiple-hubs"></a>サブスクリプションの制限と複数のハブ

Azure では、種類に関係なく、すべてのコンポーネントが Azure サブスクリプションにデプロイされます。 異なる Azure サブスクリプションに Azure コンポーネントを分離することで、差別化されたレベルのアクセスと承認の設定など、さまざまな業種の要件を満たすことができます。

単一のハブおよびスポーク実装で、多数のスポークにスケールアップできます。 ただし、他の IT システムと同様に、プラットフォームの制限があります。 ハブのデプロイは特定の Azure サブスクリプションにバインドされており、サブスクリプションには制約と制限があります。 その一例が、仮想ネットワーク ピアリングの最大数です。 詳細については、[Azure サブスクリプションとサービスの制限](/azure/azure-resource-manager/management/azure-subscription-service-limits) に関する記事を参照してください。

制限が問題になる可能性がある場合は、単一のハブアンドスポークからハブアンドスポークのクラスターにモデルを拡張することによって、アーキテクチャをさらにスケールアップできます。 仮想ネットワーク ピアリング、Azure ExpressRoute、Azure Virtual WAN、またはサイト間 VPN を使用して、1 つ以上の Azure リージョン内の複数のハブを相互接続できます。

![ハブとスポークのクラスター](../../_images/azure-best-practices/network-hub-spokes-cluster.png)  
"_図 2:ハブとスポークのクラスター。_

複数のハブを導入すると、システムのコストと管理のオーバーヘッドが増加します。 これが妥当なのは、ユーザーのパフォーマンスやディザスター リカバリーのために、スケーラビリティ、システムの制限、または冗長性やリージョン レプリケーションが必要な場合だけです。 複数のハブが必要なシナリオでは、運用を容易にするため、すべてのハブで同じサービスのセットを提供する必要があります。

## <a name="interconnection-between-spokes"></a>スポーク間の相互接続

1 つのスポーク内に、複雑な多層ワークロードを実装できます。 多階層の構成は、同じ仮想ネットワーク内のサブネット (すべての階層に対して 1 つ) を使い、ネットワーク セキュリティ グループを使ってフローをフィルター処理することによって実装できます。

アーキテクトは、複数の仮想ネットワークに多層ワークロードをデプロイできます。 仮想ネットワーク ピアリングにより、スポークは同じハブまたは異なるハブの他のスポークに接続できます。

このシナリオの一般的な例は、アプリケーション処理サーバーが 1 つのスポーク (仮想ネットワーク) にあるケースです。 データベースは別のスポーク (仮想ネットワーク) にデプロイされています。 この場合、仮想ネットワーク ピアリングでスポークを相互接続することによって、ハブの通過を簡単に回避できます。 ハブをバイパスすることで、ハブにしか存在しない重要なセキュリティ ポイントや監査ポイントがバイパスされることがないように、アーキテクチャとセキュリティを慎重に見直すことが解決策となります。

![スポークの相互接続とハブへの接続](../../_images/azure-best-practices/network-spoke-to-spoke.png)  
"_図 3:スポークの相互接続とハブへの接続。_

スポークは、ハブとして機能するスポークに相互接続することもできます。 この方法では 2 レベルの階層が作成され、上位レベル (レベル 0) のスポークが、階層の下位レベル (レベル 1) のスポークのハブになります。 ハブ アンド スポーク実装のスポークは、トラフィックがオンプレミス ネットワークまたはパブリック インターネットのいずれかで送信先に到達できるように、中央のハブにトラフィックを転送する必要があります。 2 レベルのハブのアーキテクチャでは複雑なルーティングが導入され、シンプルなハブおよびスポーク関係のメリットが失われます。
