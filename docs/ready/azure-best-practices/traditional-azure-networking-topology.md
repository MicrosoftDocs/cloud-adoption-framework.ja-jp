---
title: 従来の Azure ネットワーク トポロジ
description: Azure 内のネットワーク トポロジに関する主要な設計上の考慮事項と推奨事項について説明します。
author: JefferyMitchell
ms.author: brblanch
ms.date: 02/18/2021
ms.topic: conceptual
ms.service: cloud-adoption-framework
ms.subservice: ready
ms.custom: think-tank
ms.openlocfilehash: 22e375a21556621c76b9ce20b5716d58d4523bde
ms.sourcegitcommit: b8f8b7631aabaab28e9705934bf67dad15e3a179
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/03/2021
ms.locfileid: "101801333"
---
<!--docutune:casing "Layer-7 inbound" -->

# <a name="traditional-azure-networking-topology"></a>従来の Azure ネットワーク トポロジ

Microsoft Azure 内のネットワーク トポロジに関する主要な設計上の考慮事項と推奨事項について説明します。

![従来の Azure ネットワーク トポロジを示す図。](./media/customer-managed-topology.png)

*図 1: 従来の Azure ネットワーク トポロジ。*

**設計上の考慮事項:**

- さまざまなネットワーク トポロジで、複数のランディング ゾーン仮想ネットワークを接続できます。 たとえば、1 つの大きなフラット仮想ネットワーク、複数の ExpressRoute 回線または接続で接続された複数の仮想ネットワーク、ハブ アンド スポーク、フル メッシュ、ハイブリッドなどです。

- 仮想ネットワークがサブスクリプションの境界を横断することはできません。 ただし、仮想ネットワーク ピアリング、ExpressRoute 回線、または VPN ゲートウェイを使用することで、異なるサブスクリプションをまたいだ仮想ネットワーク間の接続を実現できます。

- 仮想ネットワーク ピアリングは、Azure で仮想ネットワークを接続するための推奨される方法です。 仮想ネットワーク ピアリングを使用して、同じリージョン内で、異なる Azure リージョン間で、および異なる Azure Active Directory (Azure AD) テナント間で、仮想ネットワークを接続できます。

- 仮想ネットワーク ピアリングとグローバル仮想ネットワーク ピアリングは推移的ではありません。 転送ネットワークを有効にするには、ユーザー定義ルート (UDR) とネットワーク仮想アプライアンス (NVA) が必要です。 詳細については、「[Azure のハブスポーク ネットワーク トポロジ](/azure/architecture/reference-architectures/hybrid-networking/hub-spoke)」を参照してください。

- ExpressRoute 回線を使用すると、同じ地政学的地域内の仮想ネットワーク間の接続や、Premium アドオンを使用して異なる地政学的地域間の接続を確立することができます。 次の点に留意してください。

  - ネットワーク間のトラフィックでは、Microsoft Enterprise Edge (MSEE) ルーターでトラフィックが折り返す必要があるため、待機時間が長くなる可能性があります。

  - 帯域幅は、ExpressRoute ゲートウェイの SKU に制限されます。

  - 仮想ネットワーク間のトラフィックの検査やログ記録が必要な場合は、やはり UDR をデプロイして管理する必要があります。

- Border Gateway Protocol (BGP) を使用する VPN ゲートウェイは、Azure 内とオンプレミスでは推移的ですが、ExpressRoute 経由で接続されたネットワークには推移的なアクセスを提供しません。

- 複数の ExpressRoute 回線が同じ仮想ネットワークに接続されている場合は、接続の重みと BGP 手法を使用して、オンプレミスと Azure の間のトラフィックに最適なパスになるようにします。 詳細については、「[ExpressRoute ルーティングの最適化](/azure/expressroute/expressroute-optimize-routing)」を参照してください。

- ExpressRoute のルーティングに影響を与える BGP メトリックの使用は、Azure プラットフォームの外部で行われる構成変更です。 お客様の組織またはその接続プロバイダーは、それに応じてオンプレミスのルーターを構成する必要があります。

- Premium アドオンを使用する ExpressRoute 回線では、グローバルな接続が提供されます。

- ExpressRoute には特定の制限が適用されます。たとえば、ExpressRoute ゲートウェイごとの ExpressRoute 接続の最大数や、ExpressRoute プライベート ピアリングを介して Azure からオンプレミスにアドバタイズできるルートの最大数などです。 このような制限については、[ExpressRoute の制限](/azure/azure-resource-manager/management/azure-subscription-service-limits#expressroute-limits)に関する記事で説明されています。

- VPN ゲートウェイの最大集約スループットは 10 Gbps です。 最大 30 個のサイト間トンネルまたはネットワーク間トンネルがサポートされます。

**設計上の推奨事項:**

- 次のシナリオでは、従来のハブ アンド スポーク ネットワーク トポロジに基づくネットワーク設計を検討してください。

  - 1 つの Azure リージョン内にデプロイされたネットワーク アーキテクチャ。

  - ネットワーク アーキテクチャは複数の Azure リージョンにまたがり、リージョンをまたぐランディング ゾーンに対する仮想ネットワーク間の推移的な接続は必要ありません。

  - ネットワーク アーキテクチャは複数の Azure リージョンにまたがり、グローバル VNet ピアリングを使用して、Azure リージョン間で仮想ネットワークを接続できます。

  - VPN 接続と ExpressRoute 接続の間の推移的な接続は必要ない。

  - 使用されている主要なハイブリッド接続の方法が ExpressRoute であり、VPN ゲートウェイあたりの VPN 接続の数が 30 未満である。

  - 集中型 NVA ときめ細かいルーティングに依存している。

- リージョン デプロイの場合は、主にハブ アンド スポーク トポロジが使用されます。 ExpressRoute 経由のクロスプレミス接続、ブランチ接続用の VPN、NVA と UDR を介したスポーク間接続、Azure Firewall または他のサードパーティ NVA によるインターネット送信保護のためには、中央ハブ仮想ネットワークに対して仮想ネットワーク ピアリングを使用して接続するランディング ゾーン仮想ネットワークを使用します。 次の図はこのワークフローを示したものです。 これにより、適切なトラフィック制御によって、セグメント化と検査のためのほとんどの要件を満たすことができます。

  ![ハブ アンド スポーク ネットワーク トポロジを示す図。](./media/hub-and-spoke-topology.png)

 *図 2: ハブ アンド スポーク ネットワーク トポロジ。*

- 次のいずれかの条件に該当する場合は、複数の ExpressRoute 回線で接続された複数の仮想ネットワークのトポロジを使用します。

  - 高いレベルの分離が必要である。

  - 特定の事業単位用に専用の ExpressRoute 帯域幅が必要である。

  - ExpressRoute ゲートウェイあたりの接続の最大数に達しました (最大数については、[ExpressRoute の制限](/azure/azure-resource-manager/management/azure-subscription-service-limits#expressroute-limits)に関する記事をご覧ください)。

次の図はこのワークフローを示したものです。

  ![複数の ExpressRoute 回線で接続された複数の仮想ネットワークを示す図。](./media/vnet-multiple-circuits.png)

 *図 3: 複数の ExpressRoute 回線で接続された複数の仮想ネットワーク。*

- ExpressRoute ゲートウェイ、VPN ゲートウェイ (必要な場合)、Azure Firewall、またはパートナーの NVA (必要な場合) が含まれる最小限の共有サービスのセットを、中央ハブの仮想ネットワークにデプロイします。 必要に応じて、Active Directory ドメイン コントローラーと DNS サーバーもデプロイします。

- East/West または South/North のトラフィックの保護とフィルター処理のための Azure Firewall またはパートナーの NVA を、中央ハブの仮想ネットワークにデプロイします。

- パートナーのネットワーク テクノロジまたは NVA として展開するときは、パートナー ベンダーのガイダンスに従って次のことを確認します。

  - ベンダーによってデプロイがサポートされる。

  - 高可用性と最大パフォーマンスのためのガイダンスが設計されています。

  - Azure ネットワークと競合する構成がない。

- 中央ハブ仮想ネットワークの共有サービスとして、Azure Application Gateway などのレイヤー 7 受信 NVA をデプロイしないでください。 代わりに、それらは、それぞれのランディング ゾーンにアプリケーションと一緒にデプロイします。

- ブランチの拠点を本社に接続するには、既存のネットワーク (MPLS および SD-WAN) を使用します。 ExpressRoute ゲートウェイと VPN ゲートウェイの間では Azure の推移はサポートされていません。

- Azure リージョンをまたぐ複数のハブ アンド スポーク トポロジがあるネットワーク アーキテクチャでは、リージョン間で通信する必要があるランディング ゾーンの数が少ない場合は、グローバル仮想ネットワーク ピアリングを使用してランディング ゾーンの仮想ネットワークを接続します。 このアプローチにより、VM SKU で許可されるような、グローバル仮想ネットワーク ピアリングによる高ネットワーク帯域幅などのメリットが提供されます。 ただし、トラフィックの検査やフィルター処理が必要な場合は、中央の NVA はバイパスされます。 これは、[グローバル仮想ネットワーク ピアリングに対する制限](/azure/virtual-network/virtual-network-peering-overview#constraints-for-peered-virtual-networks)の対象にもなります。

- お客様が 2 つの Azure リージョンにハブ アンド スポーク ネットワーク アーキテクチャをデプロイし、リージョンをまたぐすべてのランディング ゾーン間にトランジット接続が必要な場合は、ExpressRoute とデュアル回線を使用して、Azure リージョンをまたぐランディング ゾーン仮想ネットワークにトランジット接続を提供します。 このシナリオでは、ランディング ゾーンは、リージョン内ではローカル ハブ仮想ネットワーク内の NVA 経由で、リージョン間では ExpressRoute 回線を経由して推移できます。 トラフィックは MSEE ルーターで折り返す必要があります。 次の図ではこの設計を示します。

  ![ランディング ゾーンの接続の設計を示す図。](./media/vnet-dual-circuits.png)

*図 4: ランディング ゾーンの接続の設計。*

- お客様の組織が、2 つを超える Azure リージョン間でのハブ アンド スポーク ネットワーク アーキテクチャを必要としており、Azure リージョンをまたぐランディング ゾーン仮想ネットワーク間でグローバルなトランジット接続が必要な場合。 グローバル仮想ネットワーク ピアリングで中央ハブ仮想ネットワークを相互に接続し、UDR と NVA を使用してグローバル トランジット ルーティングを有効にすることで、このアーキテクチャを実装できます。 複雑度と管理オーバーヘッドが高いため、Virtual WAN を使用したグローバル トランジット ネットワーク アーキテクチャを評価することをお勧めします。

- Azure 上のネットワークのエンド ツー エンドの状態を監視するには、[Azure Monitor for Networks (プレビュー)](/azure/azure-monitor/insights/network-insights-overview) を使用します。

- スポーク仮想ネットワークを中央ハブ仮想ネットワークに接続する場合は、考慮しなければならない[制限](/azure/azure-resource-manager/management/azure-subscription-service-limits)が 2 つあります。

  - 仮想ネットワークごとの仮想ネットワーク ピアリング接続の最大数。
  - プライベート ピアリングを使用して ExpressRoute 経由で Azure からオンプレミスにアドバタイズされるプレフィックスの最大数。

  ハブ仮想ネットワークに接続されているスポーク仮想ネットワークの数が、これらの制限値を超えていないことを確認してください。
