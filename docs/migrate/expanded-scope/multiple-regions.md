---
title: 複数の地理的リージョンの移行の複雑さへの対処
titleSuffix: Microsoft Cloud Adoption Framework for Azure
description: 複数の地理的リージョンの移行の複雑さへの対処。
author: BrianBlanchard
ms.author: brblanch
ms.date: 04/04/2019
ms.topic: guide
ms.service: cloud-adoption-framework
ms.subservice: migrate
ms.openlocfilehash: 2d834b9e7c3e661561dc44b8d3104ef819f0c6af
ms.sourcegitcommit: 443c28f3afeedfbfe8b9980875a54afdbebd83a8
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/16/2019
ms.locfileid: "71025479"
---
# <a name="multiple-geographic-regions"></a>複数の地理的リージョン

企業が複数の地理的リージョンで運用されている場合、クラウド移行作業に追加の複雑さがもたらされる可能性があります。 このような複雑さは、資産の分散、ユーザー アクセス プロファイル、コンプライアンス要件の 3 つの主な形式で現れます。 複数のリージョンに関連する複雑さに対処する前に、潜在的な複雑さの範囲を理解しておくことが重要です。

## <a name="general-scope-expansion"></a>全般的な範囲の拡大

次のアプローチは、潜在的な課題を評価し、一般的な行動指針の確立に役立つ可能性があります。

- さらに堅牢な準備とガバナンスの実装を検討します。
- 影響を受ける地域のインベントリを作成します。 クラウド移行の影響を受ける地域や国の一覧をまとめます。
- データ主権要件の文書化:特定された国で、データの主権を制御するコンプライアンス要件がありますか。
- ユーザー ベースの文書化:特定された国で従業員、パートナー、またはお客様がクラウドへの移行によって影響を受けますか。
- データセンターと資産の文書化:移行作業に含まれる可能性のある特定された国に資産がありますか。

初期インベントリに対処するために、移行プロセス全体で変更を調整します。

### <a name="documenting-complexity"></a>文書化の複雑さ

次の表は、上記の手順の結果の文書化に役立つ可能性があります。

|リージョン  |Country  |ローカルの従業員  |ローカルの外部ユーザー  |ローカルのデータセンターまたは資産 |データ主権要件  |
|---------|---------|---------|---------|---------|---------|
|北米     |USA         |はい         |パートナーとお客様         |はい         |いいえ         |
|北米     |カナダ         |いいえ         |顧客         |はい         |はい         |
|ヨーロッパ     |ドイツ         |はい         |パートナーとお客様         |なし - ネットワークのみ         |はい         |
|アジア太平洋     |韓国         |はい         |パートナー         |はい         |いいえ         |

<!-- markdownlint-disable MD026 -->

### <a name="why-is-data-sovereignty-relevant"></a>データ主権が関連する理由

世界中で、政府組織が、一般データ保護規則 (GDPR) のようなデータ主権要件を確立し始めています。 この類のコンプライアンス要件では、多くの場合、特定のリージョン内または特定の国内においても、市民を保護するためにローカリゼーションが必要になります。 場合によっては、お客様、従業員、またはパートナーに属するデータを、エンド ユーザーと同じリージョン内のクラウド プラットフォームに格納する必要があります。

この課題への対応が、世界的規模で運用される企業にとっての、クラウド移行への重要な動機付けになっています。 コンプライアンス要件を維持するため、一部の企業では、リージョン内のクラウド プロバイダーに重複した IT 資産をデプロイすることを選択しています。 上記の例の表では、ドイツがこのシナリオの良い例になります。 この例では、ドイツにお客様、パートナー、および従業員がいますが、既存の IT 資産はありません。 この会社は、ドイツの Azure データセンターを使用する可能性がある場合でも、GDPR 領域内のデータセンターに一部の資産をデプロイすることを選択できます。 GDPR によって影響を受けるデータを理解することは、クラウド導入チームがこの場合での最適な移行アプローチを理解するのに役立ちます。

### <a name="why-is-the-location-of-end-users-relevant"></a>エンド ユーザーの場所が関連する理由

複数の国でエンド ユーザーをサポートする企業は、エンド ユーザー トラフィックに対処するための技術ソリューションを開発してきました。 場合により、これには資産のローカライズが含まれます。 他のシナリオでは、会社は代わりにグローバル WAN ソリューションを実装し、ネットワークに重点を置いたソリューションによって、さまざまなユーザー ベースに対処することを選択することもあります。 いずれの場合も、移行戦略は、これらのさまざまなエンド ユーザーの使用プロファイルに影響を受ける可能性があります。

会社ではドイツの従業員、パートナー、およびお客様をサポートしていますが、現在その国にデータセンターがないため、この会社では何らかの形式の専用回線を実装して、他国のデータセンターにトラフィックをルーティングしていると考えられます。 この既存のルーティングでは、移行したアプリケーションの認識されるパフォーマンスに重大なリスクが存在します。 確立され、チューニングされたグローバル WAN に追加のホップが挿入されると、移行後にアプリケーションのパフォーマンスの低下が認識されることがあります。 そうした問題の検出と修正によって、プロジェクトに大幅な遅延が加わる可能性があります。 下記の各プロセスでは、前提条件、評価、移行、最適化プロセス全体で、この複雑さに対処するためのガイダンスが含まれています。 各国のユーザー プロファイルを理解することは、この複雑さを適切に管理するために不可欠です。

### <a name="why-is-the-location-of-datacenters-relevant"></a>データセンターの場所が関連する理由

既存のデータセンターの場所が、移行戦略に影響を与えることがあります。 次に、最も一般的な影響をいくつか示します。

**アーキテクチャの決定:** ターゲットのリージョン/場所は、移行戦略設計における最初の手順の 1 つです。 これは、多くの場合、既存の資産の場所に影響を受けます。 さらに、使用可能なクラウド サービスとそれらのサービスの単価はリージョンごとに異なる可能性があります。 そのため、現在と将来の資産の場所の理解が、アーキテクチャの決定に影響し、予算の見積もりにも影響を与える可能性があります。

**データセンターの依存関係:** 上記の表のデータに基づいて、世界各地のさまざまなデータセンター間に、依存関係が存在する可能性があります。 この種類の規模で運用されている多くの組織で、そうした依存関係が文書化されていないか、十分に理解されていない場合があります。 ユーザー プロファイルを評価するために使用されるアプローチは、これらの依存関係の一部を識別するのに役立ちます。 ただし、評価プロセス中に、この複雑さに関連するリスクを軽減するために、追加の手順が推奨されます。

## <a name="implementing-the-general-approach"></a>一般的なアプローチの実装

このアプローチは、定量化可能な情報によって推進されます。 そのため、次のアプローチでは、グローバルな移行の複雑さに対処するためのデータドリブン モデルに従います。

## <a name="suggested-prerequisites"></a>推奨される前提条件

クラウド導入チームは、世界規模で試行する前に、[Azure 移行ガイド](../azure-migration-guide/index.md)を使用して、シンプルなワークロードの移行から開始することをお勧めします。 これにより、チームは複雑な移行シナリオを試す前に、クラウド移行の一般的なプロセスに慣れておくことができます。

移行の範囲に複数のリージョンが含まれる場合、クラウド導入チームによって、次の準備に関する考慮事項が評価される必要があります。

- データ主権によって、一部の資産のローカライズが必要な場合がありますが、そうしたコンプライアンスの制約に制御されない多くの資産があります。 ログ、レポート、ネットワーク ルーティング、ID、およびその他の中央 IT サービスは、複数のサブスクリプション、または複数のリージョンにまたがって共有サービスとしてホストされるのがふさわしいと考えられます。 クラウド導入チームは、[共有サービスを含むハブおよびスポーク トポロジの参照アーキテクチャ](https://docs.microsoft.com/azure/architecture/reference-architectures/hybrid-networking/shared-services)の説明に従って、これらのサービスに対して共有サービス モデルを評価することをお勧めします。
- 類似した環境の複数のインスタンスをデプロイする場合、環境ファクトリで整合性を作成し、ガバナンスを改善して、デプロイを加速させることができます。 [大企業のガバナンス体験](../../govern/guides/complex/index.md)では、複数のリージョンにわたる規模の環境ファクトリを作成するアプローチを確立しています。

チームがベースライン アプローチに慣れ、準備が整ったら、考慮すべきデータドリブンの前提条件がいくつかあります。

- **全般的な探索:** 上記の[複雑さの文書化](#documenting-complexity)の表を完成させます。
- **影響を受ける各国でユーザー プロファイル分析を実行する:** 全般的なエンド ユーザー ルーティングを移行プロセスの早期に理解しておくことが重要です。 グローバル専用回線を変更し、ExpressRoute のような接続をクラウド データセンターに追加することは、数か月のネットワークの遅延が必要になることがあります。 できる限りプロセスの早い段階でこれに対処します。
- **初期デジタル資産の合理化:** 移行戦略が複雑になったときは、常に初期デジタル資産の合理化を完了する必要があります。 サポートについては、[デジタル資産の合理化](../../digital-estate/index.md)に関するガイダンスを参照してください。
  - **デジタル資産の追加要件:** データ主権要件の影響を受けるすべてのワークロードを識別するためのタグ付けポリシーを確立します。 必要なタグは、デジタル資産の合理化で始まり、移行済みの資産まで運ばれる必要があります。
- **ハブおよびスポーク モデルの評価:** 分散システムは多くの場合に、共通の依存関係を共有しています。 それらの依存関係は多くの場合に、ハブおよびスポーク モデルの実装によって対処できます。 このようなモデルは、移行プロセスの範囲外ですが、今後の[準備プロセス](../../ready/index.md)の繰り返しで、考慮されるためにフラグ付けしておく必要があります。
- **移行バックログの優先順位付け:** 複数のリージョンをサポートするワークロードの実稼働デプロイをサポートするために、ネットワークの変更が必要な場合、クラウド戦略チームは、それらのネットワークの変更に関するエスカレーションを追跡し、管理することが重要です。 上級のエグゼクティブのサポートは、変更の加速に役立ちます。 しかし、さらに重要な効果は、グローバルなワークロードがネットワークの変更によってブロックされないように、戦略チームがバックログの優先順位を変更できるようになることです。 そのようなワークロードは、ネットワークの変更が完了した後にのみ、優先順位付けするべきです。

これらの前提条件は、移行戦略の実行中にこの複雑さに対処できるプロセスを確立するのに役立ちます。

## <a name="assess-process-changes"></a>プロセス変更の評価

グローバルな資産とユーザー ベースの複雑さを処理する場合、移行候補の評価にいくつかの重要なアクティビティを追加する必要があります。 これらの各変更では、データドリブン アプローチを通じて、グローバル ユーザーおよび資産への影響が明確になります。

### <a name="suggested-action-during-the-assess-process"></a>評価プロセス中に推奨されるアクション

**データセンター間の依存関係の評価:** [Azure Migrate の依存関係視覚化ツール](https://docs.microsoft.com/azure/migrate/concepts-dependency-visualization)は、依存関係の特定を支援できます。 移行前にこのツール セットを使用することは、一般的に適切なベスト プラクティスです。 ただし、グローバルな複雑さを処理する場合は、評価プロセスで実行する必要がある手順になります。 [依存関係のグループ化](https://docs.microsoft.com/azure/migrate/how-to-create-group-machine-dependencies)による視覚化は、ワークロードをサポートするために必要な資産の IP アドレスとポートを特定することを支援できます。

> [!IMPORTANT]
> 2 つの重要な注意事項:まず、資産の配置と IP アドレス スキーマを理解している領域の専門家がセカンダリ データセンターに存在する資産を特定する必要があります。 次に、双方向の依存関係を理解するために、視覚的にダウン ストリームの依存関係とクライアントの両方を評価することが重要です。

**グローバル ユーザーへの影響の特定:** 前提条件のユーザー プロファイル分析の結果から、グローバル ユーザー プロファイルに影響を受けるすべてのワークロードを特定する必要があります。 移行候補が影響を受けるワークロードの一覧に含まれる場合、移行を準備するアーキテクトは、ネットワークおよび運用の領域の専門家に問い合わせて、ネットワーク ルーティングとパフォーマンスの予想を検証する必要があります。 少なくとも、アーキテクチャには、最も近いネットワーク運用センター (NOC) と Azure 間の ExpressRoute 接続を含める必要があります。 [ExpressRoute 接続の参照アーキテクチャ](https://docs.microsoft.com/azure/architecture/reference-architectures/hybrid-networking/expressroute)は、必要な接続の構成に役立つことがあります。

**コンプライアンスのための設計:** 前提条件のユーザー プロファイル分析の結果から、データ主権要件の影響を受けるすべてのワークロードを特定する必要があります。 評価プロセスのアーキテクチャ アクティビティ中に、担当のアーキテクトは、コンプライアンス領域の専門家に問い合わせて、複数のリージョン間での移行/デプロイ要件を把握する必要があります。 それらの要件は、設計戦略に大きく影響します。 [マルチリージョン Web アプリケーション](https://docs.microsoft.com/azure/architecture/reference-architectures/app-service-web-app/multi-region)と[マルチリー ジョン n 層アプリケーション](https://docs.microsoft.com/azure/architecture/reference-architectures/n-tier/multi-region-sql-server)の参照アーキテクチャは、設計で役立つことがあります。

> [!WARNING]
> 上記のいずれかの参照アーキテクチャを使用する場合、データ主権要件を遵守するために、レプリケーション プロセスから特定のデータ要素を除外する必要があることがあります。 これにより、昇格プロセスに手順が追加されます。

## <a name="migrate-process-changes"></a>移行プロセスの変更

複数のリージョンにデプロイする必要があるアプリケーションを移行する場合、クラウド導入チームが検討すべきいくつかの考慮事項があります。 これらの考慮事項には、Azure Site Recovery コンテナーの設計、構成/プロセス サーバーの設計、ネットワーク帯域幅の設計、データの同期が含まれます。

### <a name="suggested-action-during-the-migrate-process"></a>移行プロセス中に推奨されるアクション

**Azure Site Recovery コンテナーの設計:** Azure Site Recovery は、デジタル資産の Azure へのクラウドネイティブのレプリケーションと同期に推奨されるツールです。 Site Recovery では、特定のリージョンと Azure データセンター内の特定のサブスクリプションにバインドされている Site Recovery コンテナーに、資産に関するデータがレプリケートされます。 資産を 2 つ目のリージョンにレプリケートする場合は、2 つ目の Site Recovery コンテナーが必要になることがあります。

**構成/プロセス サーバーの設計:** Site Recovery は、単一の Site Recovery コンテナーにバインドされている、構成およびプロセス サーバーのローカル インスタンスで動作します。 このことは、レプリケーションを容易にするために、これらのサーバーの 2 つ目のインスタンスをソース データセンターにインストールする必要がある場合があることを意味します。

**ネットワーク帯域幅の設計:** レプリケーションおよび継続的な同期時に、ネットワーク経由で、ソース データセンターからターゲット Azure データセンター内の Site Recovery コンテナーに、バイナリ データが移動されます。 このプロセスは帯域幅を消費します。 2 つ目のリージョンへのワークロードの複製により、消費される帯域幅の量が 2 倍になります。 帯域幅が制限されているか、ワークロードに大量の構成またはデータ ドリフトが含まれる場合、移行を完了するために必要な時間を妨げる可能性があります。 さらに重要なことに、ソース データセンターの帯域幅に引き続き依存しているユーザーやアプリケーションのエクスペリエンスに影響する可能性があります。

**データの同期:** 最大帯域幅の浪費が、データ プラットフォームの同期に由来する場合がよくあります。 [マルチリージョン Web アプリケーション](https://docs.microsoft.com/azure/architecture/reference-architectures/app-service-web-app/multi-region)と[マルチリージョン n 層アプリケーション](https://docs.microsoft.com/azure/architecture/reference-architectures/n-tier/multi-region-sql-server)の参照アーキテクチャで定義されているように、多くの場合にアプリケーションを一致させるために、データの同期が必要になります。 これがアプリケーションの望ましい運用状態である場合、アプリケーションと中間層の資産を移行する前に、ソース データ プラットフォームと各クラウド プラットフォーム間の同期を完了しておくことが賢明な場合があります。
**データの同期:** 最大帯域幅の浪費が、データ プラットフォームの同期に由来する場合がよくあります。 [マルチリージョン Web アプリケーション](https://docs.microsoft.com/azure/architecture/reference-architectures/app-service-web-app/multi-region)と[マルチリージョン n 層アプリケーション](https://docs.microsoft.com/azure/architecture/reference-architectures/n-tier/multi-region-sql-server)の参照アーキテクチャで定義されているように、多くの場合にアプリケーションを一致させるために、データの同期が必要になります。 これがアプリケーションの望ましい運用状態である場合、アプリケーションと中間層の資産を移行する前に、ソース データ プラットフォームと各クラウド プラットフォーム間の同期を完了しておくことが賢明な場合があります。

**Azure 間のディザスター リカバリー:** さらに複雑さを軽減できる代替オプションがあります。 タイムラインとデータ同期アプローチで、2 段階のデプロイに取り組む場合、[Azure 間のディザスター リカバリー](https://docs.microsoft.com/azure/site-recovery/azure-to-azure-architecture)が許容可能な解決策になると考えられます。 このシナリオでは、単一の Site Recovery コンテナーと、構成またはプロセス サーバー設計を使用して、ワークロードを最初の Azure データセンターに移行します。 ワークロードをテストしたら、次にそれを、移行済みの資産から 2 つ目の Azure データセンターに回復できます。 このアプローチでは、ソースデータセンター内のリソースに対する影響が減り、Azure データセンター間で利用可能な高速の転送速度と高い帯域幅制限を利用します。

> [!NOTE]
> このアプローチでは、追加のエグレス帯域幅の料金が発生することがあるため、移行の短期コストが増加する場合があります。

## <a name="optimize-and-promote-process-changes"></a>最適化および昇格プロセスの変更

最適化と昇格時のグローバルな複雑さに対処するには、追加の各リージョンで重複した作業が必要になる可能性があります。 単一のデプロイが許容される場合でも、ビジネス テストとビジネス変更プランの重複が必要になる可能性があります。

### <a name="suggested-action-during-the-optimize-and-promote-process"></a>最適化および昇格プロセス時の推奨されるアクション

**事前テストの最適化:** 初期オートメーション テストでは、すべての移行作業の場合と同様に、潜在的な最適化の機会を特定できます。 グローバルなワークロードの場合、ネットワークまたはターゲットの Azure データセンターの小さな構成変更が、パフォーマンスに影響を及ぼす可能性があるため、各リージョンで個別にワークロードをテストすることが重要です。

**ビジネス変更プラン:** すべての複雑な移行シナリオで、変更の組み込みに必要なビジネス プロセス、ユーザー エクスペリエンス、および作業のタイミングへの変更に関して、明確に伝えるため、ビジネス変更プランを作成することをお勧めします。 グローバルな移行作業の場合、このプランには、影響を受ける各地域のエンドユーザーに関する考慮事項を含める必要があります。

**ビジネス テスト:** ビジネス変更プランと組み合わせて、十分なパフォーマンスと変更されたネットワーク ルーティング パターンへの準拠を確認するために、各リージョンでビジネス テストが必要になることがあります。

**昇格フライト:** 多くの場合に、昇格は、実稼働トラフィックを移行済みのワークロードに再ルーティングする単一のアクティビティとして行われます。 グローバルなリリース作業の場合、昇格をフライト (または定義済みのユーザーのコレクション) で提供することをお勧めします。 これにより、クラウド戦略チームとクラウド導入チームは、パフォーマンスを確認しやすくなり、各リージョン内のユーザーのサポートを強化できます。 昇格フライトは多くの場合、特定の IP 範囲のルーティングをソース ワークロード資産から新しく移行された資産に変更することで、ネットワーク レベルで制御します。 指定したエンド ユーザーのコレクションを移行した後に、次のグループを再ルーティングできます。

**フライトの最適化:** 昇格フライトの 1 つの利点は、デプロイされた資産を詳しく監視し、最適化を追加できることです。 最初のフライトによる実稼働環境の短期間の利用後に、IT 運用手順で許可される場合、移行済みの資産の追加の改善が推奨されます。

## <a name="next-steps"></a>次の手順

多くの場合に複数のリージョンに関連する複雑さの別のポイントとして、[複数のデータセンター](./multiple-datacenters.md)の移行の準備の必要性があります。 本質的に似ていますが、この複雑さでは、複数のデータセンターをクラウドに移動する際に大量の資産の移行を処理します。

> [!div class="nextstepaction"]
> [複数のデータセンターの移行](./multiple-datacenters.md)
